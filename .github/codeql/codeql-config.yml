# CodeQL Configuration File for GitHub Actions
# This configuration controls the security and quality queries run by CodeQL

name: 'CodeQL Security Analysis'
version: '0.1'

# Define the paths to analyze and exclude
paths:
  - 'apps/*/src'
  - 'packages/*/src'
  - 'src'
paths-ignore:
  - 'node_modules'
  - 'dist'
  - 'build'
  - '.next'
  - 'coverage'
  - '*.test.*'
  - '*.spec.*'
  - 'tests'

# Configure the queries to run
queries:
  # Security queries (high priority)
  - name: 'security'
    uses: 'security-and-quality'

# Specific query packs to include
query-packs:
  # JavaScript security queries
  - 'codeql/javascript-queries'

  # Additional security query packs
  - 'codeql/security-queries'

  # Quality queries for code improvement
  - 'codeql/javascript-queries:code-quality'

# Additional configuration options
packs:
  # Add custom query packs if needed
  # - "my-org/custom-queries"

# Configure extraction options
extraction:
  # JavaScript/TypeScript extraction options
  javascript:
    # Include all .js, .jsx, .ts, .tsx files
    include:
      - '**/*.js'
      - '**/*.jsx'
      - '**/*.ts'
      - '**/*.tsx'

    # Exclude test files and generated files
    exclude:
      - '**/*.test.*'
      - '**/*.spec.*'
      - '**/node_modules/**'
      - '**/dist/**'
      - '**/build/**'
      - '**/.next/**'

# Configure the SARIF output format
format: sarif

# Additional CodeQL options
options:
  # Enable all security queries
  include-all-security-queries: true

  # Set query timeout (in seconds)
  query-timeout: 600

  # Enable result deduplication
  deduplicate: true

  # Set the maximum number of results per query
  max-results: 1000
