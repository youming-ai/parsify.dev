# =============================================================================
# Parsify Staging Environment Configuration
# =============================================================================
# This file contains environment-specific settings for staging
# DO NOT commit actual secrets to version control

# =============================================================================
# Basic Environment Settings
# =============================================================================
ENVIRONMENT=staging
NODE_ENV=staging
LOG_LEVEL=debug
DEBUG=true

# =============================================================================
# API Configuration
# =============================================================================
API_VERSION=v1
API_BASE_URL=https://api-staging.parsify.dev
API_TIMEOUT=30000
MAX_REQUEST_SIZE=10485760

# =============================================================================
# Security Configuration
# =============================================================================
# IMPORTANT: Use strong, unique secrets for staging
JWT_SECRET=your-staging-super-secret-jwt-key-minimum-32-characters
ENCRYPTION_KEY=your-staging-super-secret-encryption-key-minimum-32-characters

# Session configuration
SESSION_SECRET=your-staging-session-secret-key
SESSION_TIMEOUT=7200000

# CORS configuration
CORS_ORIGIN=https://staging.parsify.dev,https://parsify-dev.pages.dev
CORS_CREDENTIALS=true

# =============================================================================
# Database Configuration (Cloudflare D1)
# =============================================================================
DATABASE_ID=your-staging-database-id
DATABASE_NAME=parsify-staging
DATABASE_TIMEOUT=10000

# =============================================================================
# Cloudflare Storage Configuration
# =============================================================================

# R2 Buckets
R2_FILES_BUCKET_NAME=parsify-files-staging
R2_FILES_BUCKET_ID=your-staging-files-bucket-id
R2_BACKUPS_BUCKET_NAME=parsify-backups-staging
R2_BACKUPS_BUCKET_ID=your-staging-backups-bucket-id

# KV Namespaces
KV_CACHE_ID=your-staging-cache-kv-id
KV_SESSIONS_ID=your-staging-sessions-kv-id
KV_UPLOADS_ID=your-staging-uploads-kv-id
KV_ANALYTICS_ID=your-staging-analytics-kv-id

# Durable Objects
DURABLE_OBJECT_SESSION_MANAGER_SCRIPT=parsify-api-staging
DURABLE_OBJECT_COLLABORATION_ROOM_SCRIPT=parsify-api-staging
DURABLE_OBJECT_REALTIME_SYNC_SCRIPT=parsify-api-staging

# =============================================================================
# Monitoring and Analytics
# =============================================================================

# Sentry (Error Tracking)
SENTRY_DSN=https://your-staging-dsn.ingest.sentry.io/project-id
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.2
SENTRY_PROFILES_SAMPLE_RATE=0.2
SENTRY_DEBUG=true
SENTRY_SESSION_SAMPLE_RATE=1.0
SENTRY_ENABLE_PERFORMANCE=true
SENTRY_ENABLE_REPLAY=true
SENTRY_REPLAY_SESSION_SAMPLE_RATE=0.1
SENTRY_REPLAY_ERROR_SAMPLE_RATE=1.0

# Analytics (Plausible)
ANALYTICS_DOMAIN=staging.parsify.dev
ANALYTICS_API_KEY=your-staging-plausible-api-key
ANALYTICS_SAMPLE_RATE=1.0

# =============================================================================
# External Services
# =============================================================================

# Email Service (Resend)
EMAIL_API_KEY=re_your_staging_api_key
EMAIL_FROM_ADDRESS=staging@parsify.dev

# GitHub OAuth (staging app)
GITHUB_CLIENT_ID=your_staging_github_client_id
GITHUB_CLIENT_SECRET=your_staging_github_client_secret

# Google OAuth (staging app)
GOOGLE_CLIENT_ID=your_staging_google_client_id
GOOGLE_CLIENT_SECRET=your_staging_google_client_secret

# =============================================================================
# Development Configuration
# =============================================================================
ENABLE_HOT_RELOAD=false
ENABLE_SOURCE_MAPS=true
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_TEST_DATA=true
ENABLE_MOCK_SERVICES=false

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_REAL_TIME_COLLABORATION=true
ENABLE_ADVANCED_TOOLS=true
ENABLE_FILE_UPLOADS=true
ENABLE_USER_AUTHENTICATION=true
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_BETA_FEATURES=true
ENABLE_DEBUG_MODE=true

# =============================================================================
# Performance Configuration
# =============================================================================
ENABLE_CACHING=true
CACHE_TIMEOUT=300
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
ENABLE_MINIFICATION=true
ENABLE_BUNDLE_ANALYSIS=true

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# =============================================================================
# Queue Configuration
# =============================================================================
ANALYTICS_QUEUE_NAME=analytics-events-staging
UPLOAD_QUEUE_NAME=file-uploads-staging
NOTIFICATIONS_QUEUE_NAME=notifications-staging

# =============================================================================
# Scheduled Tasks
# =============================================================================
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE=0 */6 * * *
CLEANUP_RETENTION_DAYS=7

BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

ANALYTICS_ENABLED=true
ANALYTICS_SCHEDULE=0 * * * *
ANALYTICS_AGGREGATION_WINDOW=3600

# =============================================================================
# DNS and Domain Configuration
# =============================================================================
DOMAIN=staging.parsify.dev
API_DOMAIN=api-staging.parsify.dev
CDN_DOMAIN=cdn-staging.parsify.dev

# Cloudflare Zone ID
CLOUDFLARE_ZONE_ID=your-staging-cloudflare-zone-id
CLOUDFLARE_API_TOKEN=your-staging-cloudflare-api-token
CLOUDFLARE_ACCOUNT_ID=your-staging-cloudflare-account-id

# =============================================================================
# Testing Configuration
# =============================================================================
TEST_DATABASE_ID=your-test-database-id
TEST_API_BASE_URL=https://api-staging.parsify.dev
TEST_LOG_LEVEL=debug
TEST_ENABLE_MOCKS=false

# =============================================================================
# CI/CD Configuration
# =============================================================================
CI=true
BUILD_NUMBER=
COMMIT_SHA=
BRANCH_NAME=main

# =============================================================================
# Health Check Configuration
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_RETRIES=3

# =============================================================================
# Incident Response
# =============================================================================
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_TO=staging-alerts@parsify.dev
ALERT_SLACK_ENABLED=true
ALERT_SLACK_WEBHOOK_URL=your-staging-slack-webhook-url

# =============================================================================
# Compliance and Security
# =============================================================================
GDPR_ENABLED=true
CCPA_ENABLED=true
DATA_RETENTION_DAYS=7
SECURITY_HEADERS_ENABLED=true
